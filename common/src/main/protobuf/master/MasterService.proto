syntax = "proto3";

package master;

// Master service for worker registration
service MasterService {
  // Worker registers itself with the master
  rpc RegisterWorker (WorkerInfo) returns (RegisterWorkerResponse) {}
  
  // Worker sends sampled keys to master
  rpc sampling (SampleData) returns (SampleResponse) {}
}

// Worker information sent during registration
message WorkerInfo {
  string ip = 1;
  int32 port = 2;
  int64 ram_mb = 3;  // RAM capacity in MB
}

// Response from master after worker registration
message RegisterWorkerResponse {
  bool success = 1;
}

// Sampled keys sent from worker to master
message SampleData {
  string worker_ip = 1;
  repeated bytes keys = 2;  // 10-byte keys
}

// Response from master after receiving samples
message SampleResponse {
  bool success = 1;
}
